<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>
    
    Rika &amp; Pocky</title>
  
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="apple-touch-icon-precomposed" href="safari-icon.png">
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<script src="/js/pace.min.js"></script>

<meta name="generator" content="Hexo 4.2.1"></head>

<body>
<main class="content">
  <section class="jumbotron">
  <div class="video">
    
      <div class="video-frame">
        <img src="/images/ocean/overlay-hero.png" alt="Decorative image frame">
      </div>
    
    <div class="video-media">
      <video playsinline="" autoplay="" loop="" muted="" data-autoplay=""
             poster="/images/ocean/ocean.png" x5-video-player-type="h5">
        <source src="/images/ocean/ocean.mp4" type="video/mp4">
        <source src="/images/ocean/ocean.ogv" type="video/ogg">
        <source src="/images/ocean/ocean.webm" type="video/webm">
        <p>Your user agent does not support the HTML5 Video element.</p>
      </video>
      <div class="video-overlay"></div>
    </div>
    <div class="video-inner text-center text-white">
      <h1><a href="/">Rika &amp; Pocky</a></h1>
      <p></p>
      <div><img src="/images/hexo-inverted.svg" class="brand" alt="Rika &amp; Pocky"></div>
    </div>
    <div class="video-learn-more">
      <a class="anchor" href="#landingpage"><i class="fe fe-mouse"></i></a>
    </div>
  </div>
</section>

<div id="landingpage">
  <section class="outer">
    <article class="articles">
      
      <h1 class="page-type-title"></h1>
      
        
          <article id="2020-09-06-ftplib下载JRA-55逐日数据" class="article article-type-2020-09-06" itemscope itemprop="blogPost" data-scroll-reveal>

    <div class="article-inner">
        
            <header class="article-header">
                
  
    <h2 itemprop="name">
      <a class="article-title" href="/2020/09/07/ftplib%E4%B8%8B%E8%BD%BDJRA-55%E9%80%90%E6%97%A5%E6%95%B0%E6%8D%AE/">ftplib下载JRA-55逐日数据</a>
    </h2>
  
  




            </header>
            

                
                    <div class="article-meta">
                        <a href="/2020/09/07/ftplib%E4%B8%8B%E8%BD%BDJRA-55%E9%80%90%E6%97%A5%E6%95%B0%E6%8D%AE/" class="article-date">
  <time datetime="2020-09-06T16:00:35.000Z" itemprop="datePublished">2020-09-07</time>
</a>
                            
                    </div>
                    

                        

                                    <div class="article-entry" itemprop="articleBody">
                                        


                                            

                                                
                                                                    <h1 id="关于JRA55-Daily资料"><a href="#关于JRA55-Daily资料" class="headerlink" title="关于JRA55-Daily资料"></a>关于JRA55-Daily资料</h1><p>丑话说在前头：<strong>我从未见过如此傻逼的再分析资料！！！</strong></p>
<p>之前我用NCEP的再分析资料比较多，基本是按层次分类，逐月变量一个变量一个文件，逐日变量一年一个文件。ERA那就不说了，鼠标咔咔一通点人自动给你生成下载脚本，拖下来直接跑上就万事大吉。JRA55就不一样了，打开说明文档的一瞬间我就感到大事不妙：它的变量是一组一组存放的，并且命名方式也与我熟悉的规则相去甚远，更不用说官方页面上写了巨大的“<strong>由于服务器压力过大，建议大家下一个小时歇一个小时，并每十二小时登出一次以免服务器崩溃</strong>”……</p>
<p>以上都是序曲，当真正打开JRA服务器的时候我才感觉到了什么叫两眼一黑：</p>
<p>JRA55逐日资料的存储逻辑是这样的：打开FTP服务器，首先看到的是data01~data20一共20个文件夹，外加一个叫JRA55的文件夹</p>
<p><img src="/2020/09/07/ftplib%E4%B8%8B%E8%BD%BDJRA-55%E9%80%90%E6%97%A5%E6%95%B0%E6%8D%AE/JRA%E6%9C%8D%E5%8A%A1%E5%99%A8.PNG" alt="JRA服务器"></p>
<p>点进这个文件夹，再点进Hist，就可以看到不同时次的数据各自的目录。<strong>注意：这三个目录都是链接，并不是真实的绝对路径。</strong></p>
<p><img src="/2020/09/07/ftplib%E4%B8%8B%E8%BD%BDJRA-55%E9%80%90%E6%97%A5%E6%95%B0%E6%8D%AE/JRA55-daily.PNG" alt="JRA55-daily"></p>
<p>点进Daily后进入了逐日数据的子目录，此时链接已经把我带到了<strong>data19</strong>这个文件夹（。到这里还没有结束，我准备先下载高度场数据，于是点进了anl_p125文件夹。在等待了漫长的5分钟后，终于加载出了文件夹下的全部内容：每年每月一个文件夹，足足700多个软链接……</p>
<p><img src="/2020/09/07/ftplib%E4%B8%8B%E8%BD%BDJRA-55%E9%80%90%E6%97%A5%E6%95%B0%E6%8D%AE/yyyymm.PNG" alt="yyyymm"></p>
<p>更不要说每个链接底下都是混着放的一大堆变量，而每个变量又都是每天4个时次各一个文件，而且还是GRIB格式，下载的时候需要记得顺带捎上它们的说明文件。第一天我写完下载脚本美滋滋地挂上就回去了，第二天回来一看，好家伙才下了一年就找不到路径了，再仔细一看原来是<strong>新的一年他换了一个data文件夹存！</strong>而且如果你以为“换一个文件夹”等价于“data文件夹序号+1”那就太天真了，你的逻辑说了不算，目录安排的顺序说了才算，具体的大家自己看看就知道了，实在无力吐槽。</p>
<p>此时经历了n次下载失败的我已经完全抓狂，只想说<strong>JRA你自己不会搞就外包出去啊！！整理一下会死吗！！！！</strong></p>
<h1 id="实现方式"><a href="#实现方式" class="headerlink" title="实现方式"></a>实现方式</h1><p>综上所述，脚本需要实现这样的功能：</p>
<ol>
<li>进入Daily数据的总目录，并根据目录下给出的每个月的yyyymm文件夹链接，获取每个月的实际存储路径。</li>
<li>进入yyyymm文件夹，挑选出需要的变量对应的文件名。</li>
<li>由于获取到的文件名排列也是混乱的，为了确认下载进度，对其根据时次进行排序。</li>
<li>每个文件下载前，若本地已存在对应文件，还需检查文件完整性。</li>
</ol>
<h1 id="使用到的包"><a href="#使用到的包" class="headerlink" title="使用到的包"></a>使用到的包</h1><h2 id="re-正则表达式"><a href="#re-正则表达式" class="headerlink" title="re - 正则表达式"></a>re - 正则表达式</h2><p>官方文档<a href="https://docs.python.org/3/library/re.html#re.search" target="_blank" rel="noopener">点我</a>,主要用到了两个函数：</p>
<ol>
<li>re.match - 匹配文件开头，用于挑选需要的变量</li>
<li>re.search - 提取文件末尾的时次信息用于排序</li>
</ol>
<p>正则表达式是怎么也绕不开的一个常用包，不过我用得还不是很顺溜，有机会再去慢慢研究。</p>
<h2 id="os-文件-目录方法"><a href="#os-文件-目录方法" class="headerlink" title="os- 文件/目录方法"></a>os- 文件/目录方法</h2><p>中文文档<a href="https://docs.python.org/zh-cn/3/library/os.html" target="_blank" rel="noopener">点我</a>，英文文档<a href="https://docs.python.org/3/library/os.html" target="_blank" rel="noopener">点我</a>，菜鸟教程<a href="https://www.runoob.com/python3/python3-os-file-methods.html" target="_blank" rel="noopener">点我</a></p>
<p>操作本地文件目录，切换文件夹（os.chdir），查询文件大小（os.path.getsize），拼接路径（os.path.join）等。</p>
<h2 id="ftplib-ftp协议客户端"><a href="#ftplib-ftp协议客户端" class="headerlink" title="ftplib - ftp协议客户端"></a>ftplib - ftp协议客户端</h2><p>重头戏来了，在这之前我都不知道FTP服务器具体都有哪些指令，为了下这个数据把这个包里所有函数都仔仔细细看了一遍，自己整理了一个表,另外还有一些补充说明，放在文章末尾。</p>
<p><img src="/2020/09/07/ftplib%E4%B8%8B%E8%BD%BDJRA-55%E9%80%90%E6%97%A5%E6%95%B0%E6%8D%AE/ftplib.png" alt="ftplib"></p>
<h2 id="pandas-amp-datetime-时间与日期"><a href="#pandas-amp-datetime-时间与日期" class="headerlink" title="pandas &amp; datetime - 时间与日期"></a>pandas &amp; datetime - 时间与日期</h2><p>网上查了查怎么生成指定时间段内yyyymm的列表，结果发现好些都是写的循环一个一个加出来的，实在是太不优雅（。所以引入了pandas，用一下它的date_range函数。也许其它的包也能实现，不过鉴于我只学了一个pandas，就先有啥用啥啦！</p>
<h1 id="实际脚本"><a href="#实际脚本" class="headerlink" title="实际脚本"></a>实际脚本</h1><p>脚本存放在<a href="https://github.com/hakurena/aya-s-daily/blob/master/00_download_jra55_daily_example.py" target="_blank" rel="noopener">Github</a>，鉴于我还是没搞懂代码高亮怎么整，今天也还是上图。（polacode这个插件真的不错子！</p>
<p>这里本地文件是以wb方式打开，所以如果下载不完全是会直接覆盖本地文件 重新下载。如果单个文件较大的话可以考虑酌情修改。</p>
<p><img src="/2020/09/07/ftplib%E4%B8%8B%E8%BD%BDJRA-55%E9%80%90%E6%97%A5%E6%95%B0%E6%8D%AE/sftp_py_v2.0.png" alt="sftp_py_v2.0"></p>
<p>使用效果：</p>
<p><img src="/2020/09/07/ftplib%E4%B8%8B%E8%BD%BDJRA-55%E9%80%90%E6%97%A5%E6%95%B0%E6%8D%AE/%E5%AE%9E%E6%93%8D.PNG" alt="实操"></p>
<h1 id="ftp补充说明"><a href="#ftp补充说明" class="headerlink" title="ftp补充说明"></a>ftp补充说明</h1><p><img src="/2020/09/07/ftplib%E4%B8%8B%E8%BD%BDJRA-55%E9%80%90%E6%97%A5%E6%95%B0%E6%8D%AE/ftp-MLSD.PNG" alt="ftp-MLSD"></p>
<p><img src="/2020/09/07/ftplib%E4%B8%8B%E8%BD%BDJRA-55%E9%80%90%E6%97%A5%E6%95%B0%E6%8D%AE/ftp%E5%B7%A5%E4%BD%9C%E6%A8%A1%E5%BC%8F.PNG" alt="ftp工作模式"></p>
<p><img src="/2020/09/07/ftplib%E4%B8%8B%E8%BD%BDJRA-55%E9%80%90%E6%97%A5%E6%95%B0%E6%8D%AE/ftp%E6%8C%87%E4%BB%A4.png" alt="ftp指令"></p>
<h1 id="彩蛋"><a href="#彩蛋" class="headerlink" title="彩蛋"></a>彩蛋</h1><p>回来面对半年没见的台式机还有点陌生，重要的是我竟然忘了把wsl映射为网络驱动器是怎么整的了。直接把绝对路径</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\User\AppData\Local\Packages\CanonicalGroupLimited.Ubuntu16.04onWindows_79rhkp1fndgsc\LocalState\rootfs</span><br></pre></td></tr></table></figure>

<p>按照规则改写一下输进映射网络驱动器会报错，后来发现是因为…这是本机地址不算在网络驱动器里【。</p>
<p>正确的操作应该是添加以下地址为网络驱动器。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\\wsl$\Ubuntu-16.04</span><br></pre></td></tr></table></figure>

<p>小盆友，你学废了吗？？？</p>

                                                                        
                                    </div>
                                    <footer class="article-footer">
                                        <a data-url="http://yoursite.com/2020/09/07/ftplib%E4%B8%8B%E8%BD%BDJRA-55%E9%80%90%E6%97%A5%E6%95%B0%E6%8D%AE/" data-id="ckerak5r70003n0kyehw60swv" class="article-share-link">
                                            分享
                                        </a>
                                        
                                    </footer>

    </div>

    

                

</article>
        
          <article id="2020-07-23-下载指定时间段NCEP-R1数据" class="article article-type-2020-07-23" itemscope itemprop="blogPost" data-scroll-reveal>

    <div class="article-inner">
        
            <header class="article-header">
                
  
    <h2 itemprop="name">
      <a class="article-title" href="/2020/07/23/%E4%B8%8B%E8%BD%BD%E6%8C%87%E5%AE%9A%E6%97%B6%E9%97%B4%E6%AE%B5NCEP-R1%E6%95%B0%E6%8D%AE/">下载指定时间段NCEP-R1数据</a>
    </h2>
  
  




            </header>
            

                
                    <div class="article-meta">
                        <a href="/2020/07/23/%E4%B8%8B%E8%BD%BD%E6%8C%87%E5%AE%9A%E6%97%B6%E9%97%B4%E6%AE%B5NCEP-R1%E6%95%B0%E6%8D%AE/" class="article-date">
  <time datetime="2020-07-23T10:50:17.000Z" itemprop="datePublished">2020-07-23</time>
</a>
                            
                    </div>
                    

                        

                                    <div class="article-entry" itemprop="articleBody">
                                        


                                            

                                                
                                                                    <p>这篇文章一开始写在2019年6月19日，今天（勉强）实现当时扑街了的python做法，修整一下补个档！</p>
<p><strong>文件存放在GitHub</strong>：仓库地址<a href="https://github.com/hakurena/aya-s-daily" target="_blank" rel="noopener">戳我</a></p>
<hr>
<h1 id="Bash脚本实现"><a href="#Bash脚本实现" class="headerlink" title="Bash脚本实现"></a>Bash脚本实现</h1><p>os模块相关：<a href="https://www.jb51.net/article/141877.htm" target="_blank" rel="noopener">链接</a></p>
<p>os模块下的基本文件查询等：<a href="https://www.cnblogs.com/VseYoung/p/9941873.html" target="_blank" rel="noopener">链接</a></p>
<p>wget的用法：<a href="https://www.cnblogs.com/semonxv/p/3816366.html" target="_blank" rel="noopener">linux wget 命令用法详解(附实例说明)</a></p>
<p>NCEP/NCAR Reanalysis 1：<a href="https://www.esrl.noaa.gov/psd/data/gridded/data.ncep.reanalysis.pressure.html" target="_blank" rel="noopener">按pressure分层</a>  </p>
<p><a href="https://www.cnblogs.com/DreamDrive/p/7706585.html" target="_blank" rel="noopener">Shell中判断文件,目录是否存在</a>  </p>
<p><img src="/2020/07/23/%E4%B8%8B%E8%BD%BD%E6%8C%87%E5%AE%9A%E6%97%B6%E9%97%B4%E6%AE%B5NCEP-R1%E6%95%B0%E6%8D%AE/shell%E6%96%87%E4%BB%B6%E5%88%A4%E6%96%AD.png" alt>  </p>
<hr>
<p>好的以上内容都是为了写一个【自动下载数据】的脚本</p>
<p><strong>脚本主要功能</strong>是下载指定时间段、指定变量数据，并按变量分类存放</p>
<p>仅下载指定时间主要是为了方便使用cdo</p>
<p>（所以也可以在脚本最后直接加上cdo指令）</p>
<p><strong>脚本主要问题</strong>是不会检测已存在的文件下载是否完整。脚本运行期间文件的完整性会由wget的断点续传保证，但如果脚本运行中断，下一次运行前需要手动检查上次的最后一个文件是否被完整下载，若没有完整下好，建议删掉最后一个文件后再重新运行脚本。</p>
<p>当然我是把它提交到服务器后台去运行，不需要担心这种情况了哈哈哈哈哈哈</p>
<p>脚本如下！</p>
<p><img src="/2020/07/23/%E4%B8%8B%E8%BD%BD%E6%8C%87%E5%AE%9A%E6%97%B6%E9%97%B4%E6%AE%B5NCEP-R1%E6%95%B0%E6%8D%AE/bash.png" alt="00_download_ncep1.sh">  </p>
<hr>
<h1 id="Python脚本实现（2020-update）"><a href="#Python脚本实现（2020-update）" class="headerlink" title="Python脚本实现（2020 update）"></a>Python脚本实现（2020 update）</h1><p>因为NCEP这个数据是存储在一个ftp服务器上的，所以使用了ftplib来做这个下载。</p>
<p>服务器是匿名登陆的，主要目的也是实现只下载指定期间的数据并按变量存放。但是对于偶尔也会出现的“同一个目录下放了同一种变量的两种数据”的情况，暂时还没有考虑，也暂时不会检查文件是否已经存在or是否完整。另外还想过要增加进度条，目前还没整明白怎么搞。</p>
<p>参考文档：</p>
<ul>
<li><a href="https://docs.python.org/3/library/ftplib.html" target="_blank" rel="noopener">ftplib文档</a></li>
<li><a href="https://docs.python.org/zh-cn/3/library/re.html" target="_blank" rel="noopener">re 正则表达式</a></li>
<li><a href="https://www.jb51.net/article/62820.htm" target="_blank" rel="noopener">使用python实现正则匹配检索远端FTP目录下的文件</a></li>
</ul>
<p>没参考得上的文档：</p>
<ul>
<li><a href="https://www.cnblogs.com/xiao-apple36/p/9675185.html#_label2" target="_blank" rel="noopener">python ftplib模块使用</a></li>
<li><a href="https://www.jianshu.com/p/6a87da499bd7" target="_blank" rel="noopener">python模块之ftplib</a></li>
</ul>
<p><img src="/2020/07/23/%E4%B8%8B%E8%BD%BD%E6%8C%87%E5%AE%9A%E6%97%B6%E9%97%B4%E6%AE%B5NCEP-R1%E6%95%B0%E6%8D%AE/python.png" alt="00_download_ncep1.py"></p>
<p>本来是想传代码上来的，但是还没搞明白怎么用highlight.js做高亮，万一高亮太丑那还不如不高亮了哈哈哈哈哈！等搞明白再来更新！</p>

                                                                        
                                    </div>
                                    <footer class="article-footer">
                                        <a data-url="http://yoursite.com/2020/07/23/%E4%B8%8B%E8%BD%BD%E6%8C%87%E5%AE%9A%E6%97%B6%E9%97%B4%E6%AE%B5NCEP-R1%E6%95%B0%E6%8D%AE/" data-id="ckerak5rb0005n0ky6rg8athr" class="article-share-link">
                                            分享
                                        </a>
                                        
                                    </footer>

    </div>

    

                

</article>
        
          <article id="2020-07-21-LOFTER搬家小工具" class="article article-type-2020-07-21" itemscope itemprop="blogPost" data-scroll-reveal>

    <div class="article-inner">
        
            <header class="article-header">
                
  
    <h2 itemprop="name">
      <a class="article-title" href="/2020/07/21/LOFTER%E6%90%AC%E5%AE%B6%E5%B0%8F%E5%B7%A5%E5%85%B7/">LOFTER搬家小工具</a>
    </h2>
  
  




            </header>
            

                
                    <div class="article-meta">
                        <a href="/2020/07/21/LOFTER%E6%90%AC%E5%AE%B6%E5%B0%8F%E5%B7%A5%E5%85%B7/" class="article-date">
  <time datetime="2020-07-21T15:01:03.000Z" itemprop="datePublished">2020-07-21</time>
</a>
                            
                    </div>
                    

                        

                                    <div class="article-entry" itemprop="articleBody">
                                        


                                            

                                                
                                                                    <p>LOF事件一发不可收拾，下定决心搬家了。</p>
<p>过程其实很简单，简单介绍一下步骤，万一还有别人要搬家呢2333</p>
<hr>
<h1 id="搬家主要步骤"><a href="#搬家主要步骤" class="headerlink" title="搬家主要步骤"></a>搬家主要步骤</h1><p>1.登录LOFTER，在首页标题栏【更多】-&gt;【导入导出】，将博客导出为xml文件（长文章会被略过）</p>
<p><img src="/2020/07/21/LOFTER%E6%90%AC%E5%AE%B6%E5%B0%8F%E5%B7%A5%E5%85%B7/lof%E5%AF%BC%E5%87%BA1.png" alt></p>
<p>2.使用<a href="https://www.npmjs.com/package/lofter2hexo" target="_blank" rel="noopener">LOFTER2Hexo</a>工具，将xml切分为适用于Hexo的Markdown格式，图片会被自动下载并上传到(大概是CSDN的)图床。不熟悉代码的盆友可以试试另外一个姐妹写的<a href="https://github.com/alicewish/Lofter2Hexo" target="_blank" rel="noopener">Lofter2Hexo</a>，好处是有图形界面，问题是有图形界面我反而搞不懂了…该工具还在更新维护中!</p>
<p>3.打开powershell，hexo new新建文档，把转换好的Markdown文件复制过来稍加修改，完成！</p>
<hr>
<h1 id="一些小细节"><a href="#一些小细节" class="headerlink" title="一些小细节"></a>一些小细节</h1><h2 id="图片资源管理"><a href="#图片资源管理" class="headerlink" title="图片资源管理"></a>图片资源管理</h2><p>分割好的Markdown文件里包含的图片链接都是重新上传的网络图床链接，但是因为个人习惯的原因，我还是用了本地保存下来的图片，通过<a href="https://hexo.io/zh-cn/docs/asset-folders" target="_blank" rel="noopener">文章资源文件夹</a>的方式进行管理。这个页面还同时给出了正确引用图片的方式。</p>
<blockquote>
<p>对于那些想要更有规律地提供图片和其他资源以及想要将他们的资源分布在各个文章上的人来说，Hexo也提供了更组织化的方式来管理资源。这个稍微有些复杂但是管理资源非常方便的功能可以通过将 config.yml 文件中的 post_asset_folder 选项设为 true 来打开。<br>    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">_config.yml</span><br><span class="line">post_asset_folder: true</span><br></pre></td></tr></table></figure><br>当资源文件管理功能打开后，Hexo将会在你每一次通过 hexo new 命令创建新文章时自动创建一个文件夹。这个资源文件夹将会有与这个文章文件一样的名字。将所有与你的文章有关的资源放在这个关联文件夹中之后，你可以通过相对路径来引用它们，这样你就得到了一个更简单而且方便得多的工作流。</p>
</blockquote>
<h2 id="域名解析"><a href="#域名解析" class="headerlink" title="域名解析"></a>域名解析</h2><p>这次鼓捣途中顺便搞了搞域名，之前的教程大多使用A类型记录，先ping一下Github再把得到的IP写进记录。0202了，实在不应该再用这种Github换一次ip就要失效一次的解析方式了。只需要添加两个CNAME记录，然后等解析生效就可以，@记录可以让你直接通过域名访问blog，www记录可以让你通过www.域名访问blog。</p>
<p><img src="/2020/07/21/LOFTER%E6%90%AC%E5%AE%B6%E5%B0%8F%E5%B7%A5%E5%85%B7/%E8%A7%A3%E6%9E%90.png" alt></p>
<p>Github仓库那边，只要在Setting里直接把custom domain改成你买的域名就行了。但hexo g后CNAME文件也会失效，所以需要更改样式，避免每次都要修改这一项。具体步骤在下一小节。</p>
<h2 id="给自己整一个logo"><a href="#给自己整一个logo" class="headerlink" title="给自己整一个logo"></a>给自己整一个logo</h2><p>众所周知Safari有一个“添加到主屏幕”功能，如果能配上一个可爱的图标，那几乎就可以伪装成一个APP了。悲伤的是Safari在没有特殊设置的情况下，默认使用网页截图作为图标，我于是吭哧吭哧画了一只小松鼠，鼓捣了半天终于拥有了自己的logo：</p>
<p><img src="/2020/07/21/LOFTER%E6%90%AC%E5%AE%B6%E5%B0%8F%E5%B7%A5%E5%85%B7/icon%E4%BD%BF%E7%94%A8%E5%9B%BE.jpg" alt></p>
<p>实际使用中还有两种语句n种语法（参考<a href="https://blog.csdn.net/sinat_16493273/article/details/50624002?utm_source=blogxgwz0" target="_blank" rel="noopener">这里</a>和<a href="https://blog.csdn.net/lusonglin121/article/details/9341965/" target="_blank" rel="noopener">这里</a>），我的用法很简单，就是在index.html的head部分加上一句</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;link rel&#x3D;&quot;apple-touch-icon-precomposed&quot; href&#x3D;&quot;safari-icon.png&quot;&gt;</span><br></pre></td></tr></table></figure>
<p>然后把’safari-icon.png’这张图往仓库一丢，过一会会就生效了！</p>
<p>但是每次重新生成页面之后都要重复一遍以上操作又很麻烦，所以在把这篇文章发出去之后，我躺在床上不死心地搜了搜，发现我应该改的是样板，也就是theme的文件！于是把上一行加在了这个文件里，添加favicon的下一行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">E:\hexo\hexo\themes\ocean\layout\_partial\head.ejs</span><br><span class="line"></span><br><span class="line">  &lt;% if (theme.favicon)&#123; %&gt;</span><br><span class="line">    &lt;link rel&#x3D;&quot;shortcut icon&quot; href&#x3D;&quot;&lt;%- theme.favicon %&gt;&quot;&gt;</span><br><span class="line">    &lt;link rel&#x3D;&quot;apple-touch-icon-precomposed&quot; href&#x3D;&quot;safari-icon.png&quot;&gt;</span><br></pre></td></tr></table></figure>
<p>然后把icon和favicon.ico这个文件放在同一个文件夹里（theme下source里），<strong>顺便把CNAME文件也放进去以避免每次都要重新解析</strong>，测试了一下，成功！</p>
<p>p.s.不知道尺寸有没有限制，我用的是144*144的位图，还是挺清楚的</p>

                                                                        
                                    </div>
                                    <footer class="article-footer">
                                        <a data-url="http://yoursite.com/2020/07/21/LOFTER%E6%90%AC%E5%AE%B6%E5%B0%8F%E5%B7%A5%E5%85%B7/" data-id="ckerak5r50001n0kyb62a8blu" class="article-share-link">
                                            分享
                                        </a>
                                        
                                    </footer>

    </div>

    

                

</article>
        
          <article id="2020.05.30-五月最后一周的NCL笔记" class="article article-type-2020.05.30" itemscope itemprop="blogPost" data-scroll-reveal>

    <div class="article-inner">
        
            <header class="article-header">
                
  
    <h2 itemprop="name">
      <a class="article-title" href="/2020/05/30/%E4%BA%94%E6%9C%88%E6%9C%80%E5%90%8E%E4%B8%80%E5%91%A8%E7%9A%84NCL%E7%AC%94%E8%AE%B0/">五月最后一周的NCL笔记</a>
    </h2>
  
  




            </header>
            

                
                    <div class="article-meta">
                        <a href="/2020/05/30/%E4%BA%94%E6%9C%88%E6%9C%80%E5%90%8E%E4%B8%80%E5%91%A8%E7%9A%84NCL%E7%AC%94%E8%AE%B0/" class="article-date">
  <time datetime="2020-05-30T05:54:49.000Z" itemprop="datePublished">2020-05-30</time>
</a>
                            
                    </div>
                    

                        

                                    <div class="article-entry" itemprop="articleBody">
                                        


                                            

                                                
                                                                    <p>大家好！又是一个边骂NCL弱智一边写NCL的星期过去了！<br>我来汇报这星期新发现的bug！！！（。</p>
<hr>
<h1 id="【Resource类】"><a href="#【Resource类】" class="headerlink" title="【Resource类】"></a>【Resource类】</h1><p>&#8195;如果你也想给你的Panel图加上一个Color Bar，那你或许大概有可能也会用到如下resource设置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">panel_res                            &#x3D; True        </span><br><span class="line"></span><br><span class="line">panel_res@gsnPanelDebug              &#x3D; True    ;输出各子图的ndc坐标信息</span><br><span class="line">panel_res@gsnPanelLabelBar           &#x3D; True    ;打开panel的Label Bar</span><br><span class="line">panel_res@lbOrientation              &#x3D; &quot;Horizontal&quot;</span><br><span class="line">panel_res@pmLabelBarOrthogonalPosF   &#x3D; -0.015  ;把Label Bar往下挪一点</span><br><span class="line">panel_res@pmLabelBarWidthF           &#x3D; 0.4     ;设置Bar的宽度</span><br><span class="line">panel_res@lbLabelFontHeightF         &#x3D; 0.012   ;设置Bar的字体大小</span><br><span class="line">panel_res@gsnPanelBottom             &#x3D; 0.05    ;放不下了，给画布底下加长点儿</span><br><span class="line"></span><br><span class="line">panel_res@lbBoxLinesOn               &#x3D; True</span><br><span class="line">panel_res@lbBoxLineColor             &#x3D; &quot;grey77&quot; ;设置Bar中框线的颜色</span><br></pre></td></tr></table></figure>
<p>中间比较神奇的就是虽然大部分Panel图资源都通过plot manager（pm）实现，但其方向和字体宽度等都仍然由label bar（lb）分类下的属性设置。另外不得不特别提一句的就是</p>
<ul>
<li><strong>gsnPanelDebug</strong>：一个强烈推荐panel图排版不如人意的人试着打开的开关，不细说，但是着实好用！</li>
<li><strong>pmLabelBarOrthogonalPosF/pmLabelBarParallelPosF</strong>：前者设定垂直于label bar方向的ndc坐标偏移，后者设定平行于label bar方向的<strong>ncd坐标</strong>偏移，因而对于水平和垂直方向的label bar二者的方向是不同的。ndc坐标也是又一个NCL神奇设定，简而言之就是以左上角为<em>(x=0.00,y=1.00)</em>，然后y轴向下递减，x轴向右增加的这么一个坐标系。上述设置中涉及到0.xx的数字也大概是以这个坐标系为参考的…吧。<br>（附：NDC坐标示意图）</li>
</ul>
<p><img src="/2020/05/30/%E4%BA%94%E6%9C%88%E6%9C%80%E5%90%8E%E4%B8%80%E5%91%A8%E7%9A%84NCL%E7%AC%94%E8%AE%B0/ndc%E7%BD%91%E6%A0%BC.jpg" alt></p>
<hr>
<h1 id="【Function类】"><a href="#【Function类】" class="headerlink" title="【Function类】"></a>【Function类】</h1><h2 id="dtrend-dtrend-n-dtrend-msg-n"><a href="#dtrend-dtrend-n-dtrend-msg-n" class="headerlink" title="dtrend, dtrend_n, dtrend_msg_n"></a><a href="http://www.ncl.ucar.edu/Document/Functions/Built-in/dtrend.shtml" target="_blank" rel="noopener">dtrend</a>, <a href="http://www.ncl.ucar.edu/Document/Functions/Built-in/dtrend_n.shtml" target="_blank" rel="noopener">dtrend_n</a>, <a href="http://www.ncl.ucar.edu/Document/Functions/Built-in/dtrend_n.shtml" target="_blank" rel="noopener">dtrend_msg_n</a></h2><p>&#8195;使用最小二乘法去除数据的线性趋势，其中最后一个允许数据中包含缺测值。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dtrend(y, return_info) - 对最右边一维去趋势</span><br><span class="line">dtrend_n(y, return_info, dim) - 对dim指定的维去趋势</span><br><span class="line">dtrend_msg_n(x, y, remove_mean, return_info, dim) - 同上一个，但允许缺测值</span><br></pre></td></tr></table></figure>
<p>&#8195;其中return_info如果设置为True，返回值就会包括两个attribute，一个是去掉的趋势slope，一个是我也不知道用来干嘛的y_intercept，均为一维序列，如果要用它俩画图需要先reshape一下。最后一个函数里的第一个参数x是y需要去趋势那一维的坐标信息，一般直接取y&amp;time(以时间维为例)即可。remove_mean正常情况下设为True。这系列函数都会保留坐标和atr信息，无需拷贝坐标信息。</p>
<h2 id="mask"><a href="#mask" class="headerlink" title="mask"></a><a href="http://www.ncl.ucar.edu/Document/Functions/Built-in/mask.shtml" target="_blank" rel="noopener">mask</a></h2><p>&#8195;“保护”一个变量中符合给定条件的部分，而把其他都设为缺测值。</p>
<p>&#8195;八百年搞不清楚的一个函数，每用一次都要查一次，常查常忘。此函数接收三个参数：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mask(array, marray, mvalue)</span><br></pre></td></tr></table></figure>
<p>&#8195;其中mvalue原则上为scalar，如果是多维的，则维度需要与array匹配，或者与array的右侧几维匹配。此函数的功能是把<strong>array中对应位置的marray不等于mvalue的部分设为缺测值，即mask掉第2和第3个参数不等的部分</strong>。这个思路就十分离谱，比如我想要mask掉波作用通量Fx中西风风速uwnd小于5的部分，我需要这么写：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Fx &#x3D; mask(Fx, uwnd.lt.5, False)</span><br></pre></td></tr></table></figure>
<p>&#8195;结论就是使用时，第二个参数写上想要mask的条件判断式，第三个参数写False。。。</p>
<h2 id="clmDayTLL-clmDayTLLL-calcDayAnomTLL"><a href="#clmDayTLL-clmDayTLLL-calcDayAnomTLL" class="headerlink" title="clmDayTLL/clmDayTLLL, calcDayAnomTLL"></a><a href="http://www.ncl.ucar.edu/Document/Functions/Contributed/clmDayTLL.shtml" target="_blank" rel="noopener">clmDayTLL</a>/<a href="http://www.ncl.ucar.edu/Document/Functions/Contributed/clmDayTLLL.shtml" target="_blank" rel="noopener">clmDayTLLL</a>, <a href="http://www.ncl.ucar.edu/Document/Functions/Contributed/calcDayAnomTLL.shtml" target="_blank" rel="noopener">calcDayAnomTLL</a></h2><p>&#8195;用于计算逐日气候态（年循环）和从原数据中去除年循环。</p>
<p>&#8195;前两个函数的主要差别就是一个接收三维数据一个接收思维数据，除原数据之外还需要提供一个<em>yyyyddd</em>数据，对应输入数据的时间维，其中<em>ddd</em>指的是”在一年中是第几天“，取值范围为001-365。计算<em>yyyyddd</em>可以通过<em>cd_calendar(time, -2)</em>接<em>yyyymmdd_to_yyyyddd</em>实现，也可以<em>cd_calendar(time, 0)</em>然后提取结果的(:,0:2)再使用<em>day_of_year(year, month, day)</em>实现。</p>
<p>&#8195;<em>calcDayAnomTLL</em>接收一个clmDayTLL函数输出的结果作为参数，操d的是这个函数他…没有四维版本！所以四维数据要转换为三维处理完再reshape回去。多说无益，上一个我实际使用的例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">hgt_tmp   &#x3D; f-&gt;hgt;(:,&#123;1000,850,500,200&#125;,:,:)</span><br><span class="line">lat       &#x3D; f-&gt;lat</span><br><span class="line">lon       &#x3D; f-&gt;lon</span><br><span class="line">timetmp   &#x3D; f-&gt;time</span><br><span class="line"></span><br><span class="line">timehgt     &#x3D; cd_calendar(timetmp, -2) ;return YYYYMMDD in integer</span><br><span class="line">yyyyddd     &#x3D; yyyymmdd_to_yyyyddd(timehgt)</span><br><span class="line"></span><br><span class="line">dims_hgt &#x3D; dimsizes(hgt_tmp)</span><br><span class="line">ntime    &#x3D; dims_hgt(0)</span><br><span class="line">nlev     &#x3D; dims_hgt(1)</span><br><span class="line">nlat     &#x3D; dims_hgt(2)</span><br><span class="line">nlon     &#x3D; dims_hgt(3)</span><br><span class="line"></span><br><span class="line">hgt_tmp2 &#x3D; reshape(hgt_tmp, (&#x2F;ntime,nlev,nlat*nlon&#x2F;)) ;TLLL-&gt;TLL as required by function</span><br><span class="line">hgt_tmp2!0 &#x3D; &quot;time&quot;</span><br><span class="line">hgt_tmp2!1 &#x3D; &quot;level&quot;</span><br><span class="line">hgt_tmp2!2 &#x3D; &quot;lat_and_lon&quot;</span><br><span class="line">hgt_tmp2&amp;time   &#x3D; hgt_tmp&amp;time</span><br><span class="line">hgt_tmp2&amp;level  &#x3D; hgt_tmp&amp;level</span><br><span class="line">printVarSummary(hgt_tmp2)</span><br><span class="line"></span><br><span class="line">hgt_clm_366 &#x3D; clmDayTLL(hgt_tmp2, yyyyddd)</span><br><span class="line">hgt &#x3D; reshape(calcDayAnomTLL(hgt_tmp2, yyyyddd, hgt_clm_366), dims_hgt)</span><br><span class="line">copy_VarCoords(hgt_tmp, hgt)</span><br><span class="line">printVarSummary(hgt)</span><br></pre></td></tr></table></figure>
<p>此处不得不再次感叹ncl的博大精深！真是太tm有想法了！</p>
<h2 id="填色中央设置为透明"><a href="#填色中央设置为透明" class="headerlink" title="填色中央设置为透明"></a>填色中央设置为透明</h2><p>&#8195;最后再献丑给大家分享一个自己写的段子，主要功能是<strong>把等值线填色图靠近中间值的几个level填色设置成透明</strong>，这样就可以省去填色等值分开画还要overlay的麻烦。原理也很简单：把rgba值的最后一个值设为0，因此rgb格式的色表需要手动加上最后一维（值均设为255.0）</p>
<p>&#8195;透明半径由<code>set_trans_radius = n</code>指定，如果填色总格数是偶数，则两侧各涂n格；如果为奇数，则中间一格及左右两侧各n-1格设为无色。例如：一共14格填色，n=1，则第7和第8格设为无色；一共15格填色，n=1，则第8格被设为无色。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">res@cnLevelSelectionMode        &#x3D; &quot;ExplicitLevels&quot;</span><br><span class="line"></span><br><span class="line">    lv &#x3D; fspan(-0.075, 0.075, 11)</span><br><span class="line">    cl &#x3D; ispan(20, 108, 8)</span><br><span class="line"></span><br><span class="line">    colors_tmp &#x3D; read_colormap_file(&quot;MPL_BrBG&quot;)</span><br><span class="line">    dim_colors &#x3D; dimsizes(colors_tmp)</span><br><span class="line"></span><br><span class="line">    colors_tmp!0 &#x3D; &quot;index&quot;</span><br><span class="line">    colors_tmp&amp;index &#x3D; ispan(0, dim_colors(0)-1, 1)</span><br><span class="line">    colors_tmp!1 &#x3D; &quot;rgba&quot;</span><br><span class="line">    colors_tmp&amp;rgba &#x3D; ispan(1, 4, 1)</span><br><span class="line"></span><br><span class="line">    colors_work &#x3D; (&#x2F;colors_tmp(&#123;cl&#125;,:)&#x2F;)</span><br><span class="line"></span><br><span class="line">res@cnLevels                    &#x3D; lv</span><br><span class="line">res@cnFillColors                &#x3D; colors_work(:,:)</span><br><span class="line"></span><br><span class="line">set_trans_radius    &#x3D; 1         ;设置透明半径</span><br><span class="line"></span><br><span class="line">if (dimsizes(cl)%2.eq.0) then</span><br><span class="line">    set_trans &#x3D; (dimsizes(cl)&#x2F;2)-1</span><br><span class="line">    set_trans_start &#x3D; set_trans-set_trans_radius+1</span><br><span class="line">    set_trans_end   &#x3D; set_trans+set_trans_radius  </span><br><span class="line"></span><br><span class="line">    colors_work(set_trans_start:set_trans_end,:) &#x3D; conform_dims((&#x2F;set_trans_radius*2,4&#x2F;), (&#x2F;255.0,255.0,255.0,0.0&#x2F;)&#x2F;255.0, 1)</span><br><span class="line">else</span><br><span class="line">    set_trans &#x3D; (dimsizes(cl)-1)&#x2F;2</span><br><span class="line">    set_trans_start &#x3D; set_trans-set_trans_radius+1</span><br><span class="line">    set_trans_end   &#x3D; set_trans+set_trans_radius-1  </span><br><span class="line"></span><br><span class="line">    colors_work(set_trans_start:set_trans_end,:) &#x3D; conform_dims((&#x2F;set_trans_radius*2,4&#x2F;), (&#x2F;255.0,255.0,255.0,0.0&#x2F;)&#x2F;255.0, 1)</span><br><span class="line">end if</span><br><span class="line">res@cnFillColors                &#x3D; colors_work(:,:)</span><br></pre></td></tr></table></figure>
<p>&#8195;效果图如下：</p>
<p><img src="/2020/05/30/%E4%BA%94%E6%9C%88%E6%9C%80%E5%90%8E%E4%B8%80%E5%91%A8%E7%9A%84NCL%E7%AC%94%E8%AE%B0/%E7%A4%BA%E6%84%8F%E5%9B%BE.PNG" alt></p>
<hr>
<h1 id="【物理概念类】"><a href="#【物理概念类】" class="headerlink" title="【物理概念类】"></a>【物理概念类】</h1><h2 id="波作用通量（Wave-Activity-Flux）"><a href="#波作用通量（Wave-Activity-Flux）" class="headerlink" title="波作用通量（Wave Activity Flux）:"></a>波作用通量（Wave Activity Flux）:</h2><p>&#8195;常用的是<a href="https://journals.ametsoc.org/doi/full/10.1175/1520-0469(2001)058%3C0608%3AAFOAPI%3E2.0.CO%3B2" target="_blank" rel="noopener">Takaya &amp; Nakamura</a>在2001年提出的版本，无需时间平均，公式如下：</p>
<p><img src="/2020/05/30/%E4%BA%94%E6%9C%88%E6%9C%80%E5%90%8E%E4%B8%80%E5%91%A8%E7%9A%84NCL%E7%AC%94%E8%AE%B0/WAF.PNG" alt></p>
<p>&#8195;在做合成分析的时候，高度场可以采用合成好的异常场，但是U和V要注意还是使用平均背景场的<del>，是的看走眼用了异常风的就是上周的我！</del></p>
<p>&#8195;顺便推荐一个北海道大学zemi的讲义，总结了各代波作用通量的定义，不过内容是日文，地址<a href="http://www.gfd-dennou.org/arch/gfdsemi/2006-09-04/takaya/pub/hokkaido2006.pdf" target="_blank" rel="noopener">点我</a></p>
<h2 id="垂直水汽积分散度-（VIMFC）"><a href="#垂直水汽积分散度-（VIMFC）" class="headerlink" title="垂直水汽积分散度 （VIMFC）"></a>垂直水汽积分散度 （VIMFC）</h2><p>&#8195;说到这个又是一个虚惊一场的故事。某日算完该量画完图，突然觉得水汽辐合的位置不对（负的水汽散度代表辐合），检查程序发现计算时竟然乘以了一个-1，一下子头皮发麻…不会是算错了吧！赶紧检查公式：</p>
<p><img src="/2020/05/30/%E4%BA%94%E6%9C%88%E6%9C%80%E5%90%8E%E4%B8%80%E5%91%A8%E7%9A%84NCL%E7%AC%94%E8%AE%B0/VIMFC.png" alt></p>
<p>&#8195;正的VIMFC对应着净的降水，即大气失去水分，但是从计算过程看来，这个-1一乘到底还是把辐合辐散给对调了，毕竟垂直积分uq和vq的时候可没有乘以-1.具体情况之后再研究，附上一个<a href="http://www.ncl.ucar.edu/Applications/Scripts/mfc_div_1.ncl" target="_blank" rel="noopener">示例脚本链接</a>。</p>
<p><strong>不管怎么说，我这一周算是放假啦！</strong></p>

                                                                        
                                    </div>
                                    <footer class="article-footer">
                                        <a data-url="http://yoursite.com/2020/05/30/%E4%BA%94%E6%9C%88%E6%9C%80%E5%90%8E%E4%B8%80%E5%91%A8%E7%9A%84NCL%E7%AC%94%E8%AE%B0/" data-id="ckerak5re0006n0ky5nxs7yuy" class="article-share-link">
                                            分享
                                        </a>
                                        
                                    </footer>

    </div>

    

                

</article>
        
          <article id="2020.05.24-Hexo和VScode笔记" class="article article-type-2020.05.24" itemscope itemprop="blogPost" data-scroll-reveal>

    <div class="article-inner">
        
            <header class="article-header">
                
  
    <h2 itemprop="name">
      <a class="article-title" href="/2020/05/24/Hexo%E5%92%8CVScode%E7%AC%94%E8%AE%B0/">Hexo和VS Code笔记</a>
    </h2>
  
  




            </header>
            

                
                    <div class="article-meta">
                        <a href="/2020/05/24/Hexo%E5%92%8CVScode%E7%AC%94%E8%AE%B0/" class="article-date">
  <time datetime="2020-05-24T15:19:19.000Z" itemprop="datePublished">2020-05-24</time>
</a>
                            
                    </div>
                    

                        

                                    <div class="article-entry" itemprop="articleBody">
                                        


                                            

                                                
                                                                    <p>距离上一篇笔记刚过去了一个星期，果然只有折腾新电脑的时候新奇玩意最多…在LOF记笔记也算是我为数不多的好习惯之一了，没错我就是那种每次装一个东西都会踩同样的坑的人【。</p>
<p>之前折腾很久的<strong>hexo</strong>，前两天给自己搞起来了，之前不懂电脑的时候真的花了好大劲(((。但是因为暂时还没有搞懂markdown写博客是怎么整，所以笔记暂时继续还是在LOF上写，后面搞清楚了可能就会转到博客上去。<del>写个电脑学习笔记还要被ban我真是服了tmd气了！</del></p>
<p>另外就是终于吃了朋友的安利用上了<strong>VS Code</strong>，真是太太太太太tmd好用了令人怀疑它下一步就能自动生成代码替我工作了！火速又按头男票吃了VS安利，一会会记一下个人在使用过程中装的几个小插件，毕竟回北京之后还得给台式机再装一遍….</p>
<p>开始正题！</p>
<hr>
<h1 id="【关于hexo】"><a href="#【关于hexo】" class="headerlink" title="【关于hexo】"></a>【关于hexo】</h1><p>搭建hexo博客的时候参考了当时保存的笔记，但是现在回头看发现当时的教程有些死板，讲解也不很清楚，所以重新找了几个，比较清楚的是这个：</p>
<ul>
<li><a href="https://segmentfault.com/a/1190000017986794" target="_blank" rel="noopener">超详细Hexo+Github Page搭建技术博客教程【持续更新】</a></li>
<li><a href="https://segmentfault.com/a/1190000017986794" target="_blank" rel="noopener">搭建个人博客-hexo+github详细完整步骤</a></li>
<li><a href="https://segmentfault.com/a/1190000002632530" target="_blank" rel="noopener">hexo常用命令笔记</a></li>
<li><a href="https://hexo.io/zh-cn/docs/setup" target="_blank" rel="noopener">Hexo官方文档 -建站</a></li>
</ul>
<p>需要建站的话基本跟着第一个链接做就可以了。<br>另外之后域名解析的时候可能还会用到：</p>
<ul>
<li><a href="https://www.jianshu.com/p/a2fe56d11c4f" target="_blank" rel="noopener">搭建Hexo博客中碰到的坑</a></li>
<li><a href="http://wp.huangshiyang.com/hexo%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88" target="_blank" rel="noopener">Hexo常见问题解决方案</a></li>
</ul>
<p>所有教程的步骤基本都是【安装Git和Node.js -&gt; npm安装hexo -&gt; 初始化部署本地页面 -&gt; 部署到github】，初学的时候只知道跟着做了，回头看的话觉得有些步骤也不必特别死板</p>
<ul>
<li><p>首先git在建站过程中主要是在最后一步派上作用，即部署到github，只想要本地运行的话根本不需要安装git。我是在确定本地界面能够运行的时候才下了git对hexo文件夹做了初始化，也没有任何差别。</p>
</li>
<li><p>要说我为什么拖着不装git，其实就是我嫌弃大家都用的git bash太丑了…全程操作我都是在cmd下做的。另外我真的很容易忘掉<strong><a href="https://blog.csdn.net/sjt19910311/article/details/83685616" target="_blank" rel="noopener">git安完之后需要初始化</a></strong>，也就是 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name &quot;yourname&quot;</span><br><span class="line">git config --global user.email &quot;your@mail.com&quot;</span><br></pre></td></tr></table></figure></li>
<li><p>以及，cmd基本命令里切换文件夹是直接输入e:这样，但是切换到文件夹还是用cd命令，显示当前文件夹内容是用dir而不是ls。<del>我太南了！</del></p>
</li>
<li><p><strong>Node.js还是要先装的</strong>，不然hexo无法在浏览器端运行，而且不装Node.js也没法通过npm命令下载hexo。这个玩意到底是干啥的我也没搞明白，目前体感它就是负责在浏览器端运行网站脚本的框架。</p>
</li>
<li><p><strong>更新网页三部曲</strong>： <code>hexo c &amp;&amp; hexo g &amp;&amp; hexo d</code>（本地运行则最后的d改成s）</p>
</li>
<li><p><strong>更换主题</strong>：去github直接把主题项目打个zip下载下来，当然也可以用git从项目链接拉取不过我嫌慢(。)在themes文件夹下解压，文件夹名称是主题的名称。然后在_config.yml下把theme:后面的文字改成新主题名字就行了。</p>
</li>
<li><p>部署部分，有的人会教你上传SSH公钥，这样就可以不用每次都弹窗登陆GitHub。但是我觉得对于初心者来说还是点点鼠标登陆比较方便！<del>我才不会说是因为我根本记不得自己的GitHub密码全靠chrome自动填充呢</del></p>
</li>
<li><p><strong>github仓库名称要和用户名一致</strong>这种老生常谈也就不说了，只说两个我搞错的地方：一个是部署的时候<strong>复制的仓库http url，到.github.io就行了</strong>，我把后面的.git也复制上去了导致deploy的时候文件推送上去了但网页是404。。。另一个就是虽然私有仓库也可以部署hexo，但是你<strong>要是真的把仓库设为私有网页也会404</strong>，我到最后放弃治疗了才发现主要是因为我没有充钱。。。</p>
</li>
</ul>
<p>到这里就是我做的所有事情了，写文章美化啥的目前还没搞懂，下次有空搞了再继续！</p>
<hr>
<h1 id="【关于VS-Code】"><a href="#【关于VS-Code】" class="headerlink" title="【关于VS Code】"></a>【关于VS Code】</h1><p>没啥好说的就是两个字NB。基本上所有的插件都可以点点鼠标安装，这里只列我用着觉得好爽的插件和网页方便一键直达</p>
<ul>
<li><a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-wsl" target="_blank" rel="noopener">Remote - WSL</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-ssh" target="_blank" rel="noopener">Remote - SSH</a></li>
<li>（或者集成了以上两者的<a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.vscode-remote-extensionpack" target="_blank" rel="noopener">Remote Development</a>，这个我还没搞过）</li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=yueyueBird.ncl&ssr=false#review-details" target="_blank" rel="noopener">NCL</a></li>
</ul>
<p>第一个基本安上就能用无需设置，只要<strong>Ctrl+Shift+P输入Remote-xxx</strong>，选择config那个然后填入设置信息即可。</p>
<p><strong><em>（还没搞懂怎么插入图片所以此处缺一张图）</em></strong></p>
<p>启动的时候就在左边菜单的remote explorer打开就行，ssh打开方式也一样。<br><strong><em>（还没搞懂怎么插入图片所以此处缺一张图）</em></strong></p>
<p>NCL语法包在remote插件打开的远程环境下是需要重新安装的，不然就会显示plain text，如果打开文件发现没有高亮就可以在插件栏检查一下是不是远程端没装语法包。</p>
<p>另外SSH插件，我一开始用的是密码登陆，但是它请求密码实在是太太太频繁了，所以今天还是用上了ssh-keygen，我参考的是这个</p>
<ul>
<li><a href="https://kb.iu.edu/d/aews" target="_blank" rel="noopener">Set up SSH public-key authentication to connect to a remote system</a></li>
</ul>
<p>简而言之就是看看【电脑自己有没有公钥-私钥对 -&gt; 没有的话就生成一个，有的话直接继续 -&gt; 把自己电脑的公钥上传到服务器 -&gt; 把上传上去的内容加入到服务器的authorized_keys文件里】就万事大吉了。另附几个中文版本的</p>
<ul>
<li>比较简明的 - <a href="https://www.cnblogs.com/yanglang/p/9563496.html" target="_blank" rel="noopener">SSH-keygen用法</a></li>
<li>更加简明的 - <a href="https://www.jianshu.com/p/dd053c18e5ee" target="_blank" rel="noopener">ssh-keygen</a> ，这个里面提到了authenrized_keys的权限必须是600或更小，否则会连接失败。以及一些ssh-keygen的参数。</li>
<li>比较全面的 - <a href="https://www.cnblogs.com/shoufeng/p/11022258.html" target="_blank" rel="noopener">Linux-配置SSH免密通信-ssh-keygen的基本用法</a></li>
</ul>
<p>以上です！<br>最后再感叹一句我什么时候写论文也能这么参考文献头头是道的就好了(((。</p>
<hr>
<h3 id="今天参考的Markdown基本语法"><a href="#今天参考的Markdown基本语法" class="headerlink" title="今天参考的Markdown基本语法"></a><a href="https://blog.csdn.net/qq_29073921/article/details/86653179" target="_blank" rel="noopener">今天参考的Markdown基本语法</a></h3>
                                                                        
                                    </div>
                                    <footer class="article-footer">
                                        <a data-url="http://yoursite.com/2020/05/24/Hexo%E5%92%8CVScode%E7%AC%94%E8%AE%B0/" data-id="ckerak5qu0000n0ky1xkpgvrf" class="article-share-link">
                                            分享
                                        </a>
                                        
                                    </footer>

    </div>

    

                

</article>
        
          <article id="post-iPad-iOS设置webssh的tunnel功能" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>

    <div class="article-inner">
        
            <header class="article-header">
                
  
    <h2 itemprop="name">
      <a class="article-title" href="/2019/07/08/iPad-iOS%E8%AE%BE%E7%BD%AEwebssh%E7%9A%84tunnel%E5%8A%9F%E8%83%BD/">iPad/iOS设置webssh APP的tunnel功能</a>
    </h2>
  
  




            </header>
            

                
                    <div class="article-meta">
                        <a href="/2019/07/08/iPad-iOS%E8%AE%BE%E7%BD%AEwebssh%E7%9A%84tunnel%E5%8A%9F%E8%83%BD/" class="article-date">
  <time datetime="2019-07-08T07:19:21.000Z" itemprop="datePublished">2019-07-08</time>
</a>
                            
  <div class="article-category">
    <a class="article-category-link" href="/categories/tools/">tools</a>
  </div>

                    </div>
                    

                        

                                    <div class="article-entry" itemprop="articleBody">
                                        


                                            

                                                
                                                                    <p>出差在外，需要访问单位内网的服务器（172.xxx.xxx.xxx），有相应账号密码一套，同时还有一台可以从外网接入的跳板机/堡垒机（159.xxx.xxx.xxx），另有账号密码一套。</p>
<p>最简单的实现方法当然是ssh两次，但这样没法使用sftp功能，所以尝试设置常用的ssh APP - webssh的tunnel功能。但这个神奇的软件是一个德（?)国人个人开发的，官方的文档网站竟然404 no found，搜索引擎也是遍地搜不着这个软件的相关使用心得，只能自己琢磨着设置，好不容易最后成功了，设置如下</p>
<p>原理如下图：tunnel的功能是从本地登陆跳板机159，并令本地起端口654映射到目标机器172的默认端口22. 启动tunnel后，再登陆本地起的端口，该端口已经被映射到了目标机器的默认端口，因此需要输入目标机器的账号密码。</p>
<p><img src="/2019/07/08/iPad-iOS%E8%AE%BE%E7%BD%AEwebssh%E7%9A%84tunnel%E5%8A%9F%E8%83%BD/ssh_tunnel%E5%8E%9F%E7%90%86.jpeg" alt></p>
<p>tunnel设置如下</p>
<p><img src="/2019/07/08/iPad-iOS%E8%AE%BE%E7%BD%AEwebssh%E7%9A%84tunnel%E5%8A%9F%E8%83%BD/%E8%B7%B3%E6%9D%BF%E6%9C%BA%E8%AE%BE%E7%BD%AE.jpeg" alt>  </p>
<p>ssh设置如下</p>
<p><img src="/2019/07/08/iPad-iOS%E8%AE%BE%E7%BD%AEwebssh%E7%9A%84tunnel%E5%8A%9F%E8%83%BD/%E7%99%BB%E5%BD%95%E8%AE%BE%E7%BD%AE.jpeg" alt></p>
<p>P.S.在使用tunnel的情景下是可以直接使用sftp和scp的，但先登录跳板机再ssh到目标服务器的话，使用scp会把文件保存到跳板机的相应位置。使用tunnel的情况下，iPad可以通过App提供的sftp相关功能进行文件的上传下载，本地文件夹一般是app自己的目录下的文件夹，想要保存到文件的话需要自己去文件里把它抠出来。</p>

                                                                        
                                    </div>
                                    <footer class="article-footer">
                                        <a data-url="http://yoursite.com/2019/07/08/iPad-iOS%E8%AE%BE%E7%BD%AEwebssh%E7%9A%84tunnel%E5%8A%9F%E8%83%BD/" data-id="ckerak5r60002n0kyd9iz8rng" class="article-share-link">
                                            分享
                                        </a>
                                        
                                    </footer>

    </div>

    

                

</article>
        
    </article>
    
  
    
  </section>
</div>

  <footer class="footer">
  <div class="outer">
    <div class="float-right">
      <ul class="list-inline">
  
    <li><i class="fe fe-bar-chart"></i> <span id="busuanzi_value_site_pv"></span></li>
  
    <li><i class="fe fe-smile-alt"></i> <span id="busuanzi_value_site_uv"></span></li>
  
</ul>
    </div>
    <ul class="list-inline">
      <li>&copy; 2020 Rika &amp; Pocky</li>
      <li>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></li>
      <li>Theme  <a href="https://github.com/zhwangart/hexo-theme-ocean" target="_blank" rel="noopener">Ocean</a></li>
    </ul>
  </div>
</footer>

</main>
<aside class="sidebar">
  <button class="navbar-toggle"></button>
<nav class="navbar">
  
    <div class="logo">
      <a href="/"><img src="/images/hexo.svg" alt="Rika &amp; Pocky"></a>
    </div>
  
  <ul class="nav nav-main">
    
      <li class="nav-item">
        <a class="nav-item-link" href="/">Home</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/archives">Note</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/about">About</a>
      </li>
    
    <li class="nav-item">
      <a class="nav-item-link nav-item-search" title="搜索">
        <i class="fe fe-search"></i>
        搜索
      </a>
    </li>
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      <div class="totop" id="totop">
  <i class="fe fe-rocket"></i>
</div>
    </li>
    <li class="nav-item">
      
        <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
          <i class="fe fe-feed"></i>
        </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
</aside>

<script src="/js/jquery-2.0.3.min.js"></script>


<script src="/js/jquery.justifiedGallery.min.js"></script>


<script src="/js/lazyload.min.js"></script>


<script src="/js/busuanzi-2.3.pure.min.js"></script>


  
<script src="/fancybox/jquery.fancybox.min.js"></script>






<script src="/js/ocean.js"></script>


</body>
</html>